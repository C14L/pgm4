{% extends "pgm4app/base.html" %}
{% load pgm4tags i18n markdown_deux_tags bleach_tags %}

{% block content %}
  <section class="question detail">
    {% include 'pgm4app/question_header_partial.html' with question=object detail=1 %}

    <div class="question content">
      {{ object.text|markdown|bleach }}
    </div>

    <div class="links">
      {% if user.is_authenticated %}
        <a class="link-answer-create" href="{% url 'answer-create' object.pk %}">{% trans 'answer this question' %}</a>
      {% else %}
        <a class="link-answer-create" href="{% url 'account_login' %}">{% trans 'login to answer' %}</a>
      {% endif %}
      <a class="link-answer-list" href="#answer-list">{% trans 'jump to answers' %}</a>
    </div>

    {% include 'pgm4app/comment_list_partial.html' with comments=object.children.public.comments parent=object %}
  </section>

  <section class="answers list" id="answer-list">
    <h2>{% trans 'Answers' %} <span class="count">({{ object.children.public.answers | length }})</span></h2>

    {% for answer in object.children.public.answers|complete_content_list_for_user:user %}
      {% include 'pgm4app/answer_detail_partial.html' %}
    {% endfor %}
  </section>

{% endblock %}
